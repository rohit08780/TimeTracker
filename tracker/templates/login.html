<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Tracker</title>
</head>
<body>
    <h1>Employee Time Tracker</h1>
    <form id="task-form">
        <label for="title">Task Title:</label>
        <input type="text" id="title" required><br><br>

        <label for="description">Description:</label>
        <textarea id="description" required></textarea><br><br>

        <label for="hours">Hours Spent:</label>
        <input type="number" id="hours" min="1" max="8" required><br><br>

        <label for="date">Date:</label>
        <input type="date" id="date" required><br><br>

        <button type="submit">Log Task</button>
    </form>

    <div id="task-list"></div>

    <script src="script.js"></script>
</body>
</html>


<script>
    // script.js

document.getElementById('task-form').addEventListener('submit', function(event) {
    event.preventDefault();

    const taskData = {
        title: document.getElementById('title').value,
        description: document.getElementById('description').value,
        hours_spent: document.getElementById('hours').value,
        date: document.getElementById('date').value
    };

    fetch('http://127.0.0.1:8000/api/tasks/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer ' + localStorage.getItem('token')
        },
        body: JSON.stringify(taskData)
    })
    .then(response => response.json())
    .then(data => {
        alert('Task Logged Successfully!');
        loadTasks();
    })
    .catch(error => console.error('Error:', error));
});

function loadTasks() {
    fetch('http://127.0.0.1:8000/api/tasks/', {
        headers: {
            'Authorization': 'Bearer ' + localStorage.getItem('token')
        }
    })
    .then(response => response.json())
    .then(data => {
        let taskList = document.getElementById('task-list');
        taskList.innerHTML = '';
        data.forEach(task => {
            let taskElement = document.createElement('div');
            taskElement.innerHTML = `<strong>${task.title}</strong><br>${task.description}<br>${task.hours_spent} hours on ${task.date}`;
            taskList.appendChild(taskElement);
        });
    });
}

loadTasks();

</script>